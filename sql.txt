psql -U ag6946 -d ag6946_mfdbv3 -h pgserver.mah.se
jnblid5q

DROP DATABASE IF EXISTS ag6946_mfdbv4;
CREATE DATABASE ag6946_mfdbv4;
REVOKE ALL PRIVILEGES ON DATABASE ag6946_mfdbv4 FROM PUBLIC;

\c ag6946_mfdbv4;

CREATE TABLE forfattare
(
id SERIAL,
anv_namn varchar (50) NOT NULL,
losenord varchar (50) NOT NULL,
namn varchar(50) NOT NULL,
efternamn varchar(50) NOT NULL,
person_nummer varchar(50) NOT NULL,
text text,
PRIMARY KEY (id)
);

CREATE TABLE artikel
(
id SERIAL,
rubrik varchar(50) NOT NULL,
ingress text,
a_text text,
datum date,
PRIMARY KEY (id)
);

CREATE TABLE bilder
(
id SERIAL,
bnamn varchar(50),
lank varchar(200),
PRIMARY KEY (id)
);

CREATE TABLE skrivit
(
artikel_id SERIAL,
forfattar_id SERIAL,
PRIMARY KEY (artikel_id, forfattar_id),
FOREIGN KEY (artikel_id) references artikel(id),
FOREIGN KEY (forfattar_id) references forfattare(id)
);

CREATE TABLE artikel_foto
(
artikel_id SERIAL,
bild_id SERIAL,
bildnamn varchar(50),
PRIMARY KEY (artikel_id, bild_id),
FOREIGN KEY (artikel_id) references artikel(id),
FOREIGN KEY (bild_id) references bilder(id)
);

CREATE TABLE kommentar
(
  kommentar_id SERIAL,
  knamn varchar(50),
  text varchar(200),
  artikel_id SERIAL,
  datum VARCHAR,
  PRIMARY KEY (kommentar_id),
  FOREIGN KEY (artikel_id) references artikel(id)
);

INSERT INTO forfattare
(anv_namn, losenord, namn, efternamn, person_nummer, text)
VALUES
('Test', 'Test', 'Testet', 'Testsson', '19930141247','Test Text'),
('hannes', 'hannes', 'Hannes', 'Linner', '196512312451', 'Skriver om hundar'),
('jossan', 'jossan', 'Josefine', 'Vesterinen', '1976234985723', 'En annan skribent'),
('carl', 'calle', 'Carl', 'Stensson', '19856747231', 'En person');

INSERT INTO artikel
(rubrik, ingress, a_text, datum)
VALUES
('Test Rubrik 1', 'Nam libero tempore, cum soluta nobis est eligendi optio quo minus id.', '"At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.', '2018-10-05'),
('Test Rubrik 2', 'Omnis dolor repellendus.', '"Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor.', '2018-04-05'),
('Test Rubrik 3', 'Et harum quidem rerum facilis est et expedita.','Eligendi optio quo minus id quod maxime placeat facere possimus, excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio.', '2017-10-05'),
('Test Rubrik 4', 'Quidem rerum facilis est et Genegalica perfecto for thabadriubnerat.','Quo minus id quod maxime placeat facere possimus, excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia.', '2012-06-05'),
('Test Rubrik 5', 'Est et expeditaet quidem rerum facilis, quidem rerum facilis.',' Harum quidem rerum facilis est et expedita distinctio. excepturi sint occaecati cupiditate non provident,  deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio.', '2018-10-07'),
('Test Rubrik 6', 'Expedita distinctio.','Eligendi optio quo minus id quod maxime placeat facere possimus, excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio.', '2015-01-05'),
('Test Rubrik 7', 'Quidem rerum ','Eligendi optio quo minus id quod maxime placeat facere possimus, Excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio.', '2015-01-04')
;

INSERT INTO skrivit
(artikel_id, forfattar_id)
VALUES
(1,1),
(2,1),
(2,3),
(3,1),
(3,4),
(4,4),
(5,3),
(6,2),
(7,2),
(8,2);

INSERT INTO bilder
(bnamn, lank)
VALUES
('Painter','https://images.pexels.com/photos/396159/pexels-photo-396159.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Paint','https://images.pexels.com/photos/1573827/pexels-photo-1573827.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Ballon','https://images.pexels.com/photos/68806/pexels-photo-68806.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Ballons','https://images.pexels.com/photos/618609/pexels-photo-618609.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Fish','https://images.pexels.com/photos/428625/balloon-hot-air-balloon-ride-mission-lighthouse-428625.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Mr Skwp','https://images.pexels.com/photos/64219/dolphin-marine-mammals-water-sea-64219.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Satan','https://images.pexels.com/photos/158163/clouds-cloudporn-weather-lookup-158163.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Small plp','https://images.pexels.com/photos/37728/pexels-photo-37728.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Ghost','https://images.pexels.com/photos/139681/pexels-photo-139681.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Adrian','https://images.pexels.com/photos/1282313/pexels-photo-1282313.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('KOl','https://images.pexels.com/photos/9198/nature-sky-twilight-grass-9198.jpg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260'),
('Uppe','https://images.pexels.com/photos/762679/pexels-photo-762679.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260')
;

INSERT INTO artikel_foto
(artikel_id, bild_id, bildnamn)
VALUES
(1, 1, 'Test bild'),
(2, 2, 'En bild text, till bild'),
(3, 9, 'En annan text.'),
(4, 10, 'En bild text, till bild'),
(5, 11, 'En bild text, till bild'),
(6, 12, 'Kan man se bilden.'),
(6, 6, 'Verkligheten'),
(7, 3, 'En bild text, till bild'),
(7, 4, 'En bild text, till bild'),
(7, 5, 'En bild text, till bild'),
(7, 7, 'Alt bild');

INSERT INTO kommentar
(knamn, text, artikel_id, datum)
VALUES
('Test', 'Test text.', 7, '2018-10-05'),
('hannes', 'hannes är bäst', 7, '2017-10-05'),
('jossan', 'jossan har häst', 7, '2019-10-05')
;



//sql querys
//Small artikel + forfattare
select a.rubrik, f.namn, f.efternamn from((forfattare as f join skrivit as s on f.id=s.forfattar_id) join artikel as a on a.id=s.artikel_id);
//Full artikel + f�rfattare
select a.rubrik, a.ingress, a.a_text, a.datum, f.namn, f.efternamn from((forfattare as f join skrivit as s on f.id=s.forfattar_id) join artikel as a on a.id=s.artikel_id);
//Artikel + Bilder
select a.rubrik, b.namn, b.lank from((bilder as b join artikel_foto as p on b.id=p.bild_id) join artikel as a on a.id=p.artikel_id);
//Specifik Artikel med bild
select a.rubrik, b.namn, b.lank from((bilder as b join artikel_foto as p on b.id=p.bild_id) join artikel as a on a.id=p.artikel_id) where a.id=1;

/FULL
select a.rubrik, a.ingress, a.a_text, a.datum, f.namn, f.efternamn, b.namn, b.lank from((((forfattare as f join skrivit as s on f.id=s.forfattar_id) join artikel as a on a.id=s.artikel_id) join bilder as b join artikel_foto as p on b.id=p.bild_id) join artikel as a on a.id=p.artikel_id);

cursor.execute("select a.rubrik, b.namn, b.lank fr
om((bilder as b join artikel_foto as p on b.id=p.bild_id) join artikel as a on a.id=p.artikel_id) where a.id= %s", (a))

cursor.execute("INSERT INTO `notes` (bokning_id, user_id, points, text, rubrik) VALUES (%s, %s, %s, %s, %s)", (bokning_id, user_id, points, text, rubrik))

[('Test Rubrik 4', 'Quidem rerum facilis est et Genegalica perfecto for thabadriubnerat.', 'Quo minus id quod maxime placeat facere possimus, excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia.', datetime.date(2012, 6, 5))]
